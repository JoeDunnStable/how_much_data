<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HowMuchData: Observations on Taleb&#39;s &quot;How much data do you need&quot;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HowMuchData
   &#160;<span id="projectnumber">0.8.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Observations on Taleb's "How much data do you need" </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>Nassim Nicholas Taleb has recently released a paper entitled <em>How much data do you need? An operational metric for fat-tailedness</em>. to appear in the International Journal of Forecasting. The paper focuses on the preasymptotic behavior of the sum of independent identically distributed random variables that are governed by various fat-tailed distributions. He introduces a metric labeled "kappa" that's related to the growth rate of the mean absolute deviation (MAD) as the number of summands increases. Kappa is defined by the following formula.</p>
<p>kappa(n0,n) = 2- (log(n)-log(n0))/(log(MAD(n) - MAD(n0))</p>
<p>Normally distributed variables have a kappa of zero. Thus the extent to which kappa is in excess of zero measures the "fat-tailedness".</p>
<h2>Purpose</h2>
<p>Taleb analyzes a number of distributions to estimate their kappa. He gives explicit formulae for kappa(1,2), which he was able to derive analytically, but he also includes tables of kappa(1,30) and kappa(1,100) for two distributions, namely the Pareto distribution and Student's t distribution. This package is my effort to replicate those tables and perhaps add others for the other distributions. It's a work in progress, as there are some items that I can't closely replicate. However, none of the differences are large enough to call into question Taleb's results.</p>
<h2>What's included</h2>
<p>I've experimented with three algorithms implemented in C++, one of which relies on monte carlo simulations, a second, which relies on the use of the discrete fourier transform of the characteristic function of the convolution of the distribution functions, and finally one that takes advantage of an integral representation of the MAD given the derivative of characteristic function of the underlying distribution.</p>
<p>The package includes several files developed for this project:</p>
<ul>
<li>convolution_test.cpp. The main program to nun the convolution test, which will be retired in the next iteration. The pinelis_taleb integral is vastly superior in terms of speed and accuracy.</li>
<li><a class="el" href="monte__carlo__test_8cpp.html">monte_carlo_test.cpp</a>. The main program to run the monte carlo test. It's bullet-proof but so slow that it's hard to obtain the required accuracy in a reasonable time frame even using multi-threading.</li>
<li><a class="el" href="pinelis__taleb__test_8cpp.html">pinelis_taleb_test.cpp</a>. The main program implementing the integral representation of MAD. This is my current method of choice.</li>
<li><a class="el" href="pareto__distribution_8h.html">pareto_distribution.h</a>. Contains a class for the pareto distribution, modeled on the classes in boost::random and including items normally computed in boost::math::statistical_distributions</li>
<li><a class="el" href="student__t__distribution_8h.html">student_t_distribution.h</a>. Similar to pareto but starts as a derived class from boost::random::student_t_distribution</li>
<li><a class="el" href="exponential__distribution_8h.html">exponential_distribution.h</a>. A derived class from boost::random::exponential_distribution</li>
<li><a class="el" href="lognormal__distribution_8h.html">lognormal_distribution.h</a>. A derived class from boost::random::lognormal_distribution. The class implementing the distribution includes several versions of the calculation of the characteristic function: some based on numerical integration from the definition, one based on a asymptotic series for small angular frequency and one based on a approximation using Lambert W functions.</li>
</ul>
<p>In addition, i've included the apparatus I developed for adaptive integration, which seems to work much better that the Boost version that was originally used. The code is spread through the following files:</p>
<ul>
<li>adaptive_integration.h. The file that defines the interface to the adaptive integration routines.</li>
<li>adaptive_integration_impl.h. Most of the actual implementation.</li>
<li>gauss_kronrad.h. Interface to the functions used to calculate the nodes and weights for the integration.</li>
<li>gauss_kronrod_impl.h. The implementing code for gauss_kronrod.</li>
<li>myfloat.h. Some basic definitions allowing various types of multi-precision numbers. Multiprecision is not used in the current implementation of how_much_data.</li>
</ul>
<p>Finally included is a test program.</p>
<ul>
<li>lognormal_test.cpp. A program to test the various versions of the calculation of the characteristic function. .</li>
</ul>
<p>In order to improve portability, a meson.build file is included, which allows an easy port to other systems once the needed packages are installed.</p>
<h3>Update Feb. 15, 2019</h3>
<p>I noticed that Taleb covered the same topic in N. N. Taleb,<a href="https://www.academia.edu/37221402/THE_STATISTICAL_CONSEQUENCES_OF_FAT_TAILS_TECHNICAL_INCERTO_COLLECTION_?auto=download">Statistical Consequences of Fat Tails</a>. The procedure outlined in Section 6.5 of that monograph using results of Pinelis is of general applicability and is incorporated into pinelis_taleb_test.</p>
<h2>Further Documentation</h2>
<p>The code has been documented using the doxygen system. The result can be accessed in the doc subdirectory of the output directory. The html version is accessed through html/index.html</p>
<h2>Observations</h2>
<p>So far my results are close to Taleb's. As Taleb mentions in his paper such distributions require huge amounts of data to produce reasonable estimates of the MAD and this fact is mirrored in the number of monte carlo runs or in the size the arrays used in the fast fourier transform. I'm pushing the limit of my computer's capability for the cases where alpha = 1.25 or alpha = 1.5. The convolution is limited by the size of available memory and the monte carlo approach is limited by the amount of time and the number of processors available. The pinelis_taleb integral bypasses most of these problems, but it requires a very accurate calculation of the characteristic function and its derivative and some ingenuity in choosing the right contour for integration.</p>
<p>I've experimented with other measures of scale, such as the 95% confidence interval spread, for which the amount of computation needed is much more modest, but these results may not be relevant if MAD is the measure which best characterizes the uncertainty.</p>
<h3>Relationship with the Statble Distribution</h3>
<p>Almost all of the distributions modeled have an associated stable distribution that is asymptotically equivalent to the modeled distribution. The kappa for stable distributions is always 2 - alpha. However, in most cases the MAD for the associated stable distribution is significantly different from the MAD for the modelled distribution and the divergence of kappa from 2 - alpha is associated with the rate of convergence of the MAD to the MAD of the associated stable distribution.</p>
<h3>Lognormal Distribution</h3>
<p>As Taleb mentions in his paper, the lognormal distribution is a well behaved thin tail distriubtion for small sigma, but becomes a fat-tailed distribution for sigmas much in excess of one. The weakest part of the calculation here is associated with the large sigma runs of the for the convolution test of the lognormal distribution. These have three widely divergent scales associated with them. For instance, when mu=0 and sigma=5, the mode is about 1.4e-11, the mean and MAD are about 2.7e+5 and the stardard deviation is about 7.2e+10. The MAD for the normal distribution is sqrt(2/pi) times it's standard deviation and therefore the the MAD normallized by n^.5 must go from 2.7e+5 to 5.7e+10 to reach it's asymptotic state.</p>
<h2>To Do</h2>
<ul>
<li>Implement the normal with switching variance distribution. This is the one that Taleb uses demonstrate the possibility of negative kappa.</li>
</ul>
<h2>Acknowledgements</h2>
<ol type="1">
<li>The package makes heavy use of the Boost C++ headers available at <a href="http://www.boost.org">boost</a>.</li>
<li>The package uses the Eigen headers for the purpose of wrapping the fast fourier transform code and holding the large arrays that are used by the fft. These are available at <a href="http://www.eigen.tuxfamily.org">Eigen</a>.</li>
<li>As distributed the Eigen header wraps the fftw3 available at <a href="http://fftw.org">fftw</a>. The fftw uses a GPL, so if you want a less restrictive license you should delete the line #define EIGEN_FFTW_DEFAULT at the beginning of convolution_test.cpp, which will revert to the kissfft. Warning: kissfft uses much more memory and causes a severe slow down on my machine for the larger arrays because of swapping activiity.</li>
<li>One of the calculations of the characteristic function for the lognormal distribution uses Lambert W functions. I've used the C++ code for the complex Lambert W function from <a href="https://sites.google.com/site/istvanmezo81/others">Istvan Mezo's web page</a>.</li>
<li>The routines in the adaptive_integration routine started out life as machine C++ translations of Fortran routines in QUADPACK, which is part of SLATEC and therefore in the public domain (<a href="http://en.wikipedia.org/wiki/QUADPACK">http://en.wikipedia.org/wiki/QUADPACK</a>). The routines were then heavily modified to take advantage of the C++ language.</li>
<li>One of the modifications made to QUADPACK is the addition of the ability to calculate the nodes and weights for the Gauss Kronrod integration on the fly. For this purpose Dirk Laurie's method is used <a href="http://dip.sun.ac.za/~laurie/papers/kronrod/kronrod.ps">kronrod.ps</a>. The routines used here are C++ translations of Dirk Laurie's MATLAB code, which is included in Walter Gautschi's OPQ suite <a href="https://www.cs.purdue.edu/archives/2002/wxg/codes/OPQ.html">OPQ</a>.</li>
</ol>
<h2>License</h2>
<p>The code included here is covered the the MIT license. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 1 2019 16:29:52 for HowMuchData by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
