\hypertarget{convolution__test_8cpp}{}\section{/\+Users/jdunn/\+Documents/\+X\+Code/how\+\_\+much\+\_\+data/convolution\+\_\+test/convolution\+\_\+test.cpp File Reference}
\label{convolution__test_8cpp}\index{/\+Users/jdunn/\+Documents/\+X\+Code/how\+\_\+much\+\_\+data/convolution\+\_\+test/convolution\+\_\+test.\+cpp@{/\+Users/jdunn/\+Documents/\+X\+Code/how\+\_\+much\+\_\+data/convolution\+\_\+test/convolution\+\_\+test.\+cpp}}
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$array$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include $<$mutex$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include $<$complex$>$}\newline
{\ttfamily \#include $<$Eigen/\+Dense$>$}\newline
{\ttfamily \#include $<$unsupported/\+Eigen/\+F\+FT$>$}\newline
{\ttfamily \#include $<$boost/timer/timer.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/filesystem.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/math/tools/roots.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/math/constants/constants.\+hpp$>$}\newline
{\ttfamily \#include \char`\"{}pareto\+\_\+distribution.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}student\+\_\+t\+\_\+distribution.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}exponential\+\_\+distribution.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lognormal\+\_\+distribution.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}taleb\+\_\+results.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structNumpunct}{Numpunct}}
\begin{DoxyCompactList}\small\item\em sturcture passed by imbue to ostreams to use commas in numbers \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structKappaResult}{Kappa\+Result}}
\begin{DoxyCompactList}\small\item\em structure holding the results of a run for a single alpha \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structKappaResults}{Kappa\+Results}}
\begin{DoxyCompactList}\small\item\em structure holding the results of all runs \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classUpper}{Upper$<$ Dist $>$}}
\begin{DoxyCompactList}\small\item\em functor for determining upper limit for target mad \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classLower}{Lower$<$ Dist $>$}}
\begin{DoxyCompactList}\small\item\em functor for determining lower limit for target mad \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structJob}{Job}}
\begin{DoxyCompactList}\small\item\em instances\mbox{]} of \mbox{\hyperlink{structJob}{Job}} used to parcel characteristic funciion calculation to threads \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{convolution__test_8cpp_ae79a798c16c07a1c30875a02adbd0808}\label{convolution__test_8cpp_ae79a798c16c07a1c30875a02adbd0808}} 
\#define \mbox{\hyperlink{convolution__test_8cpp_ae79a798c16c07a1c30875a02adbd0808}{E\+I\+G\+E\+N\+\_\+\+F\+F\+T\+W\+\_\+\+D\+E\+F\+A\+U\+LT}}
\begin{DoxyCompactList}\small\item\em cause Eigen/\+F\+FT to use fftw. delete to avoid G\+PL \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{convolution__test_8cpp_a51303eefcc6fc2ae099ec7d41bb63bc8}\label{convolution__test_8cpp_a51303eefcc6fc2ae099ec7d41bb63bc8}} 
using {\bfseries dcomplex} = std\+::complex$<$ double $>$
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{convolution__test_8cpp_a8bc12c575bef5adcd18ff54fed138db7}\label{convolution__test_8cpp_a8bc12c575bef5adcd18ff54fed138db7}} 
{\footnotesize template$<$typename Real\+Type $>$ }\\Real\+Type \mbox{\hyperlink{convolution__test_8cpp_a8bc12c575bef5adcd18ff54fed138db7}{rel\+\_\+err}} (Real\+Type a, Real\+Type b)
\begin{DoxyCompactList}\small\item\em return the relative differnece between two numbers \end{DoxyCompactList}\item 
\mbox{\Hypertarget{convolution__test_8cpp_abef86d57e5a2d6f59d7b6559f8ab0e25}\label{convolution__test_8cpp_abef86d57e5a2d6f59d7b6559f8ab0e25}} 
ostream \& \mbox{\hyperlink{convolution__test_8cpp_abef86d57e5a2d6f59d7b6559f8ab0e25}{operator$<$$<$}} (ostream \&os, const \mbox{\hyperlink{structKappaResult}{Kappa\+Result}} \&k)
\begin{DoxyCompactList}\small\item\em output the results to an ostream \end{DoxyCompactList}\item 
\mbox{\Hypertarget{convolution__test_8cpp_a438174fcc3100be9441615ef06115383}\label{convolution__test_8cpp_a438174fcc3100be9441615ef06115383}} 
ostream \& \mbox{\hyperlink{convolution__test_8cpp_a438174fcc3100be9441615ef06115383}{operator$<$$<$}} (ostream \&os, \mbox{\hyperlink{structKappaResults}{Kappa\+Results}} \&ks)
\begin{DoxyCompactList}\small\item\em output the results of all runs to an ostream \end{DoxyCompactList}\item 
\mbox{\Hypertarget{convolution__test_8cpp_a69c18c9507ef22a89f1f437bcc75baaf}\label{convolution__test_8cpp_a69c18c9507ef22a89f1f437bcc75baaf}} 
int \mbox{\hyperlink{convolution__test_8cpp_a69c18c9507ef22a89f1f437bcc75baaf}{mod}} (int a, int b)
\begin{DoxyCompactList}\small\item\em modulo calculation return nonnegative number less than the modulus \end{DoxyCompactList}\item 
double \mbox{\hyperlink{convolution__test_8cpp_af2b0a39893ac34990d442b0978de3896}{confidence\+\_\+interval}} (int nmin, int nmax, double delta, const Map$<$ Matrix$<$ double, Dynamic, 1 $>$ $>$ \&pdf, double ci\+\_\+level)
\begin{DoxyCompactList}\small\item\em calcuate confidence interval given pdf at points in range \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{convolution__test_8cpp_ac33f31a308a1b19bbe61326a5b50f352}{factor\+\_\+check}} (int n, vector$<$ int $>$ primes)
\begin{DoxyCompactList}\small\item\em Check whether the factorization of n contains only listed primes. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Dist $>$ }\\void \mbox{\hyperlink{convolution__test_8cpp_a69bf222dc10eddf4418c1ff923778292}{calc\+\_\+characteristic\+\_\+function}} (const Dist \&dist, const double mean, const int n, const double delta\+\_\+omega, \mbox{\hyperlink{structJob}{Job}} $\ast$job, Matrix$<$ dcomplex, Dynamic, 1 $>$ $\ast$adj\+\_\+cf)
\begin{DoxyCompactList}\small\item\em calculate the characteristic function for a range assigned to trhead \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Dist $>$ }\\void \mbox{\hyperlink{convolution__test_8cpp_ac7b8bb1ff5dea331981d02b1ceb1cf42}{calculate\+\_\+kappa}} (double delta, double delta2, int m, vector$<$ int $>$ ns, Dist dist, double ci\+\_\+level, \mbox{\hyperlink{structKappaResult}{Kappa\+Result}} \&k, bool verbose=false)
\begin{DoxyCompactList}\small\item\em set up ranges and step sizes for one alpham pass calculation of cf to threads and use fft to estimate distribution \end{DoxyCompactList}\item 
void \mbox{\hyperlink{convolution__test_8cpp_a29d3334e2ee8e1ff561e3897ad2cc928}{show\+\_\+usage}} (path p)
\begin{DoxyCompactList}\small\item\em show proper usage after improper command line argument \end{DoxyCompactList}\item 
\mbox{\Hypertarget{convolution__test_8cpp_ac0f2228420376f4db7e1274f2b41667c}\label{convolution__test_8cpp_ac0f2228420376f4db7e1274f2b41667c}} 
int \mbox{\hyperlink{convolution__test_8cpp_ac0f2228420376f4db7e1274f2b41667c}{main}} (int argc, const char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em main program for convolution\+\_\+testl \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{convolution__test_8cpp_a1752433ee2ffb3c6bfef8288eea8e632}\label{convolution__test_8cpp_a1752433ee2ffb3c6bfef8288eea8e632}} 
Eigen\+::\+F\+FT$<$ double $>$ {\bfseries fft\+\_\+eng}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{convolution__test_8cpp_a69bf222dc10eddf4418c1ff923778292}\label{convolution__test_8cpp_a69bf222dc10eddf4418c1ff923778292}} 
\index{convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}!calc\+\_\+characteristic\+\_\+function@{calc\+\_\+characteristic\+\_\+function}}
\index{calc\+\_\+characteristic\+\_\+function@{calc\+\_\+characteristic\+\_\+function}!convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}}
\subsubsection{\texorpdfstring{calc\+\_\+characteristic\+\_\+function()}{calc\_characteristic\_function()}}
{\footnotesize\ttfamily template$<$typename Dist $>$ \\
void calc\+\_\+characteristic\+\_\+function (\begin{DoxyParamCaption}\item[{const Dist \&}]{dist,  }\item[{const double}]{mean,  }\item[{const int}]{n,  }\item[{const double}]{delta\+\_\+omega,  }\item[{\mbox{\hyperlink{structJob}{Job}} $\ast$}]{job,  }\item[{Matrix$<$ dcomplex, Dynamic, 1 $>$ $\ast$}]{adj\+\_\+cf }\end{DoxyParamCaption})}



calculate the characteristic function for a range assigned to trhead 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em dist} & the distribution \\
\hline
\mbox{\tt in}  & {\em mean} & the mean to remove \\
\hline
\mbox{\tt in}  & {\em n} & the duration \\
\hline
\mbox{\tt in}  & {\em delta\+\_\+omega} & step for omega \\
\hline
\mbox{\tt in,out}  & {\em job} & ptr to job assigner \\
\hline
\mbox{\tt out}  & {\em adj\+\_\+cf} & the characeristic function of the normalized distrbibution \begin{quote}
for non-\/negative frequencies \end{quote}
\\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{convolution__test_8cpp_ac7b8bb1ff5dea331981d02b1ceb1cf42}\label{convolution__test_8cpp_ac7b8bb1ff5dea331981d02b1ceb1cf42}} 
\index{convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}!calculate\+\_\+kappa@{calculate\+\_\+kappa}}
\index{calculate\+\_\+kappa@{calculate\+\_\+kappa}!convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}}
\subsubsection{\texorpdfstring{calculate\+\_\+kappa()}{calculate\_kappa()}}
{\footnotesize\ttfamily template$<$typename Dist $>$ \\
void calculate\+\_\+kappa (\begin{DoxyParamCaption}\item[{double}]{delta,  }\item[{double}]{delta2,  }\item[{int}]{m,  }\item[{vector$<$ int $>$}]{ns,  }\item[{Dist}]{dist,  }\item[{double}]{ci\+\_\+level,  }\item[{\mbox{\hyperlink{structKappaResult}{Kappa\+Result}} \&}]{k,  }\item[{bool}]{verbose = {\ttfamily false} }\end{DoxyParamCaption})}



set up ranges and step sizes for one alpham pass calculation of cf to threads and use fft to estimate distribution 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em delta} & the step size in x / dist.\+mad \\
\hline
\mbox{\tt in}  & {\em delta2} & cap on \% mad from the tail \\
\hline
\mbox{\tt in}  & {\em m} & cap on maximum index \\
\hline
\mbox{\tt in}  & {\em ns} & the durations to calculate \\
\hline
\mbox{\tt in}  & {\em dist} & the distribution \\
\hline
\mbox{\tt in}  & {\em ci\+\_\+level} & the confidence level for kappa\+\_\+ci \\
\hline
\mbox{\tt out}  & {\em k} & the results \\
\hline
\mbox{\tt in}  & {\em verbose} & flag for trace \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{convolution__test_8cpp_af2b0a39893ac34990d442b0978de3896}\label{convolution__test_8cpp_af2b0a39893ac34990d442b0978de3896}} 
\index{convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}!confidence\+\_\+interval@{confidence\+\_\+interval}}
\index{confidence\+\_\+interval@{confidence\+\_\+interval}!convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}}
\subsubsection{\texorpdfstring{confidence\+\_\+interval()}{confidence\_interval()}}
{\footnotesize\ttfamily double confidence\+\_\+interval (\begin{DoxyParamCaption}\item[{int}]{nmin,  }\item[{int}]{nmax,  }\item[{double}]{delta,  }\item[{const Map$<$ Matrix$<$ double, Dynamic, 1 $>$ $>$ \&}]{pdf,  }\item[{double}]{ci\+\_\+level }\end{DoxyParamCaption})}



calcuate confidence interval given pdf at points in range 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em nmin} & the minimum index \\
\hline
\mbox{\tt in}  & {\em nmax} & the maximum index \\
\hline
\mbox{\tt in}  & {\em delta} & the spacing of the x\textquotesingle{}s \\
\hline
\mbox{\tt in}  & {\em pdf} & the calculated pdf\textquotesingle{}s \\
\hline
\mbox{\tt in}  & {\em ci\+\_\+level} & the confidence level \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{convolution__test_8cpp_ac33f31a308a1b19bbe61326a5b50f352}\label{convolution__test_8cpp_ac33f31a308a1b19bbe61326a5b50f352}} 
\index{convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}!factor\+\_\+check@{factor\+\_\+check}}
\index{factor\+\_\+check@{factor\+\_\+check}!convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}}
\subsubsection{\texorpdfstring{factor\+\_\+check()}{factor\_check()}}
{\footnotesize\ttfamily bool factor\+\_\+check (\begin{DoxyParamCaption}\item[{int}]{n,  }\item[{vector$<$ int $>$}]{primes }\end{DoxyParamCaption})}



Check whether the factorization of n contains only listed primes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em n} & the number to check \\
\hline
\mbox{\tt in}  & {\em primes} & the array of candidate primes \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{convolution__test_8cpp_a29d3334e2ee8e1ff561e3897ad2cc928}\label{convolution__test_8cpp_a29d3334e2ee8e1ff561e3897ad2cc928}} 
\index{convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}!show\+\_\+usage@{show\+\_\+usage}}
\index{show\+\_\+usage@{show\+\_\+usage}!convolution\+\_\+test.\+cpp@{convolution\+\_\+test.\+cpp}}
\subsubsection{\texorpdfstring{show\+\_\+usage()}{show\_usage()}}
{\footnotesize\ttfamily void show\+\_\+usage (\begin{DoxyParamCaption}\item[{path}]{p }\end{DoxyParamCaption})}



show proper usage after improper command line argument 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & the path of the executable \\
\hline
\end{DoxyParams}
